# 🔍 Chrome扩展调试指南

## 📋 如何获取详细日志

### 1. 获取背景脚本日志 ⭐ **最重要**

#### 步骤：
1. **打开Chrome扩展管理页面**
   - 在地址栏输入: `chrome://extensions/`
   - 或者: 菜单 → 扩展程序 → 管理扩展程序

2. **找到"腾讯文档 Markdown 查看器"扩展**
   - 确保扩展已启用
   - 点击"详细信息"按钮

3. **打开背景脚本控制台**
   - 在扩展详情页面，找到"检查视图"部分
   - 点击"背景脚本"旁边的"查看视图"链接
   - 这会打开一个开发者工具窗口

4. **查看日志**
   - 在开发者工具的Console标签中查看日志
   - 应该能看到类似这样的信息：
     ```
     [Background] 扩展已安装/更新
     Chrome侧边栏API可用性: true
     [Background] 侧边栏选项已设置
     ```

5. **测试点击插件图标**
   - 保持背景脚本控制台开启
   - 点击浏览器工具栏中的插件图标
   - 观察控制台中的新日志

#### ⚠️ 如果没有"查看视图"选项：
- 说明背景脚本没有启动
- 可能是manifest.json有语法错误

---

### 2. 获取扩展加载错误日志

#### 在扩展管理页面检查：
1. 查看扩展卡片上是否有红色错误提示
2. 如果有错误，点击"错误"按钮查看详情
3. 截图或复制所有错误信息

---

### 3. 获取Chrome浏览器控制台日志

#### 步骤：
1. **打开任意网页**
2. **按F12打开开发者工具**
3. **切换到Console标签**
4. **清除现有日志**（点击清除按钮）
5. **点击插件图标**
6. **查看是否有新的错误日志**

---

### 4. 检查Chrome版本和API支持

#### 获取Chrome版本信息：
1. 在地址栏输入: `chrome://version/`
2. 记录Chrome版本号

#### 检查侧边栏API支持：
1. 按F12打开开发者工具
2. 在Console中输入并执行：
   ```javascript
   console.log('Chrome版本:', navigator.userAgent);
   console.log('侧边栏API可用:', !!chrome.sidePanel);
   console.log('所有Chrome API:', Object.keys(chrome));
   ```

---

## 📝 需要收集的信息清单

请按照上述步骤收集以下信息：

### ✅ 基础信息
- [ ] Chrome版本号
- [ ] 操作系统信息
- [ ] 扩展是否正常加载（无红色错误提示）

### ✅ 背景脚本日志
- [ ] 扩展启动时的日志
- [ ] 点击插件图标时的日志
- [ ] 任何错误信息

### ✅ 扩展错误信息
- [ ] 扩展管理页面显示的错误
- [ ] 浏览器控制台的错误

### ✅ API检查结果
- [ ] `chrome.sidePanel` 是否存在
- [ ] Chrome API列表

---

## 🚨 常见问题排查

### 如果背景脚本控制台无法打开：
```
可能原因：
1. manifest.json语法错误
2. background.js语法错误
3. Chrome版本不支持Manifest V3
```

### 如果点击图标没有任何反应：
```
检查：
1. 背景脚本是否有日志输出
2. 是否有JavaScript错误
3. Chrome版本是否支持侧边栏API
```

### 如果侧边栏API不存在：
```
Chrome 114+才支持侧边栏API
需要更新Chrome浏览器
```

---

## 📤 如何提供日志

请按以下格式提供信息：

```
Chrome版本: [从chrome://version/获取]
操作系统: [Windows/Mac/Linux]
扩展状态: [正常加载/有错误]

=== 背景脚本日志 ===
[粘贴控制台日志]

=== 扩展错误 ===
[粘贴错误信息]

=== API检查结果 ===
chrome.sidePanel存在: [true/false]
Chrome APIs: [粘贴API列表]
```

这样我就能准确分析问题所在了！